<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Unity VR Roller Coaster Shooter Game Tutorial Pt.1 – Simplified</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* Simple styles for the details/summary elements */
        details > summary {
            list-style: none;
        }
        details > summary::-webkit-details-marker {
            display: none;
        }
        details > summary::before {
            content: '►';
            margin-right: 0.5rem;
            display: inline-block;
            transition: transform 0.2s;
        }
        details[open] > summary::before {
            transform: rotate(90deg);
        }
        /* Basic styling for code blocks */
        pre {
            white-space: pre-wrap;
            word-wrap: break-word;
        }
    </style>
</head>
<body class="bg-gray-100 text-gray-800 font-sans leading-relaxed">

    <div class="max-w-4xl mx-auto p-4 sm:p-8 bg-white shadow-lg my-8 rounded-lg">
        <header>
            <h1 class="text-3xl md:text-5xl font-bold text-gray-900 mb-6">Unity VR Roller Coaster Shooter Game Tutorial Pt.1</h1>
        </header>

        <main class="space-y-12">

            <!-- Image Gallery -->
            <div class="grid grid-cols-2 md:grid-cols-3 gap-4">
                <img src="https://timcoster.com/wp-content/uploads/2023/11/unity-vrrollercoastershootertutorial-processimg-002.png" alt="VR Rollercoaster Screenshot 1" class="rounded-lg shadow-md w-full h-auto">
                <img src="https://timcoster.com/wp-content/uploads/2023/11/unity-vrrollercoastershootertutorial-processimg-000.png" alt="VR Rollercoaster Screenshot 2" class="rounded-lg shadow-md w-full h-auto">
                <img src="https://timcoster.com/wp-content/uploads/2023/09/screenshot-2023-09-13-at-09.13.13.png" alt="VR Rollercoaster Screenshot 3" class="rounded-lg shadow-md w-full h-auto">
                <img src="https://timcoster.com/wp-content/uploads/2023/11/unity-vrrollercoastershootertutorial-processimg-001.png" alt="VR Rollercoaster Screenshot 4" class="rounded-lg shadow-md w-full h-auto">
                <img src="https://timcoster.com/wp-content/uploads/2023/11/unity-vrrollercoastershootertutorial-processimg-003.png" alt="VR Rollercoaster Screenshot 5" class="rounded-lg shadow-md w-full h-auto">
                <img src="https://timcoster.com/wp-content/uploads/2023/09/screenshot-2023-09-23-152915.png" alt="VR Gun Model" class="rounded-lg shadow-md w-full h-auto">
            </div>

            <!-- YouTube Video -->
            <details class="bg-gray-50 rounded-lg p-4" open>
                <summary class="font-semibold text-lg cursor-pointer py-2">YouTube Demo</summary>
                <div class="mt-4">
                    <div class="aspect-w-16 aspect-h-9">
                        <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/hkJvA8-PTig" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                    </div>
                </div>
            </details>

            <!-- Introduction -->
            <section>
                <h2 class="text-2xl font-bold text-center my-4">Introduction</h2>
                <p class="text-center font-semibold text-red-600">⚠️ (This tutorial is currently under construction) ⚠️</p>
                <p class="mt-4">
                    In this tutorial we are going to create a VR Roller Coaster Shooter Game (an on-rails shooter) for the Oculus/Meta Quest 2 headset!
                </p>
                <p class="mt-2">
                    The gameplay for the game that we are going to make is inspired by Until Dawn: Rush of Blood, one of the first games I ever played in VR. Until Dawn: Rush of Blood is a horror themed on-rails VR shooter game from Supermassive Games, the creators of the 2015 PS4 horror game Until Dawn and the 2022 PS5 horror game The Quarry.
                </p>
                <p class="mt-2">
                    The concept of the game works really well in VR, because you’re probably sitting down in reality and because you’re also sitting down in the virtual reality rollercoaster train cart, it just feels right. Looking around while riding a rollercoaster and shooting at targets placed alongside the rollercoaster tracks from inside the rollercoaster train is a lot of fun and can be really challenging when there are lots of targets to hit and when the train is moving at a high velocity.
                </p>
                <p class="mt-2">
                    Also, you know that queasy feeling in your stomach when you’re on a actual rollercoaster that is going into a steep drop? That turns out to be something your brain does to you because you will also get that same stomach feeling in VR when the roller coaster train makes a steep drop, making everything feel extra real!
                </p>
                <h3 class="font-semibold mt-6 mb-2">In this tutorial you will learn:</h3>
                <ul class="list-disc list-inside space-y-1">
                    <li>How to setup your project for building to the Oculus/Meta Quest 2 VR headset.</li>
                    <li>How to setup your project for VR using the XR Interaction Toolkit package.</li>
                    <li>How to setup a VR Player Controller with Full Locomotion using dual thumb sticks.</li>
                    <li>How to test your game in VR during Unity Playmode with Quest Link.</li>
                    <li>How to create a Unity Terrain with hills, grass, trees, bushes and water.</li>
                    <li>How to setup a skybox.</li>
                    <li>How to create a roller coaster track using the Unity Splines Package.</li>
                    <li>How to make a train cart follow the spline of the roller coaster track.</li>
                    <li>How to let the player enter and exit the train.</li>
                    <li>How to make pistols and rifles that can be picked up and fired with.</li>
                    <li>How to make moving targets for the player that can be shot.</li>
                    <li>How to create a player scoring system and UI score display.</li>
                    <li>How to create a invisible trigger box that can make ‘things’ happen when the player enters.</li>
                    <li>How to create a VR Title scene with a floating Main Menu window for your game.</li>
                    <li>How to build your game to your Quest 2 VR headset.</li>
                </ul>
                <p class="text-center italic mt-6">
                    This tutorial was created using <strong>Unity 2022.3.9f1 LTS (updated to 6000)</strong> with the <strong>3D Core</strong> project template.
                </p>
            </section>

            <!-- Dependencies -->
            <section class="space-y-4">
                <h3 class="text-xl font-bold">Dependencies</h3>
                <div>
                    <h4 class="font-semibold">Hardware Requirements</h4>
                    <ul class="list-disc list-inside ml-4">
                        <li>A VR Ready PC with a USB-C port</li>
                        <li>An Oculus/Meta Quest 2, 3 or Pro VR HMD (Head Mounted Display)</li>
                        <li>An Oculus/Meta Quest Link capable USB-C cable</li>
                    </ul>
                </div>

                <details class="bg-blue-50 border border-blue-200 rounded-lg p-4">
                    <summary class="font-semibold cursor-pointer">Notes on Quest Link</summary>
                    <div class="mt-3 space-y-2">
                        <p>To use the Quest as a regular PC connected VR Headset, instead of a stand alone mobile one, a Quest Link cable is required. Connecting the Quest to your PC using the Link cable will allow you to play test your game live in the Unity Editor while you are creating it.</p>
                        <img src="https://timcoster.com/wp-content/uploads/2023/09/metaquestlinkcable.webp?w=300" alt="Meta Quest Link Cable" class="mx-auto my-4 rounded-lg">
                        <p>Without the Quest Link cable you can still connect your Quest to the Oculus PC application over Wi-Fi but then you’re Wi-Fi router/connection has to be fast enough (6G Wi-Fi) or you may experience motion sickness very quickly.</p>
                        <p>The default USB-C Quest charging cable that came with the Quest can only be used to charge the headset and to transfer data/builds to the Quest but not to transfer the large display data.</p>
                        <p>To get a better clue on what is going on with those expensive USB-C cables I recommend watching this YouTube video from Adam Savage: <a href="https://www.youtube.com/watch?v=AD5aAd8Oy84" class="text-blue-600 hover:underline" target="_blank" rel="noopener">https://www.youtube.com/watch?v=AD5aAd8Oy84</a></p>
                    </div>
                </details>

                <div>
                    <h4 class="font-semibold">Software</h4>
                    <ul class="list-disc list-inside ml-4">
                        <li>Unity Hub</li>
                        <li>Unity 6000</li>
                        <li>Visual Studio Code (or other code editor)</li>
                        <li>Oculus Rift Software</li>
                        <li>Meta Quest Developer Hub (Optional)</li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-semibold">Unity Packages and Assets</h4>
                    <p>You don’t have to download these packages right away, we’ll go over installing them individually.</p>
                    <h5 class="font-medium mt-2">Packages: Unity Registry</h5>
                    <ul class="list-disc list-inside ml-4">
                        <li>XR Plugin Management</li>
                        <li>XR Interaction Toolkit + Starter Assets Samples</li>
                        <li>Oculus XR Plugin</li>
                        <li>Splines</li>
                        <li>TextMesh Pro + Samples</li>
                        <li>Terrain Tools (Optional)</li>
                    </ul>
                    <h5 class="font-medium mt-2">Packages: Asset Store</h5>
                    <ul class="list-disc list-inside ml-4">
                        <li>Allsky Free – 10 Sky / Skybox Set: <a href="https://assetstore.unity.com/packages/2d/textures-materials/sky/allsky-free-10-sky-skybox-set-146014" class="text-blue-600 hover:underline" target="_blank">Link</a></li>
                        <li>Dream Forest Tree: <a href="https://assetstore.unity.com/packages/3d/vegetation/trees/dream-forest-tree-105297" class="text-blue-600 hover:underline" target="_blank">Link</a></li>
                        <li>Unity Technologies Particle Pack: <a href="https://assetstore.unity.com/packages/vfx/particles/particle-pack-127325" class="text-blue-600 hover:underline" target="_blank">Link</a></li>
                    </ul>
                </div>
            </section>

            <!-- Tutorial Conventions -->
            <details class="bg-green-50 border border-green-200 rounded-lg">
                <summary class="font-semibold text-lg cursor-pointer p-4">Tutorial Conventions</summary>
                <div class="p-4 border-t space-y-4">
                    <p>To make the reading of this tutorial better this tutorial uses the following conventions:</p>
                    
                    <div>
                        <h4 class="text-lg font-semibold">1: File names, file addresses and folder addresses</h4>
                        <p>Filenames file addresses and folder addresses are all written in <em>Italic</em> so when you see text written in <em>Italic</em> it is always a file or file address in the Unity Project view or in Windows Explorer.</p>
                        <p class="mt-2"><strong>Filename examples:</strong><br>
                        <em>Level 1.unity, MineCart.wav, VRPlayer.cs, SmallCrate.jpg</em></p>
                        <p class="mt-2"><strong>Folder address examples:</strong><br>
                        <em>Assets/MyGame/Scenes, Assets/MyGame/Textures, C:/users/tim/Documents/Unity/Projects/VRRollerCoasterShooter-Project/Assets</em></p>
                        <p class="mt-2"><strong>File address examples:</strong><br>
                        <em>Assets/MyGame/Scenes/Level 1.unity, Assets/MyGame/Textures/SmallCrate.jpg, C:/users/tim/Desktop/New Text Document.txt</em></p>
                    </div>

                    <div>
                        <h4 class="text-lg font-semibold">2: Menu settings and GameObjects</h4>
                        <p>All options and settings in the normal Unity menu bars and windows and also addresses to Unity GameObjects in the game levels, like the game Camera, the Player, the Roller Coaster and the Sun etcetera, are pointed out with right angle brackets > so when you see the right angle brackets in the tutorial text then it points to either a setting or in one of Unity’s menus or to a GameObject in one of the scenes/levels in the Unity Hierarchy view.</p>
                        <p class="mt-2"><strong>Unity Menu bar examples:</strong><br>
                        Unity Menu Bar > File > Save<br>
                        Unity Menu Bar > GameObject > 3D Object > Cube</p>
                        <p class="mt-2"><strong>Hierarchy view examples:</strong><br>
                        Hierarchy view > Level 1 > select VRPlayer<br>
                        Hierarchy view > Level 1 > VRPlayer > select Main Camera</p>
                    </div>

                    <img src="./ARVR/Windows.png" alt="Unity Editor Windows" class="rounded-lg shadow-md w-full">
                    <p>Also try to watch at least one of the videos below to get a better understanding of how to use Unity: <a href="https://www.youtube.com/watch?v=E6A4WvsDeLE&list=PLzDRvYVwl53vxdAPq8OznBAdjf0eeiipT&index=1" class="text-blue-600 hover:underline">Unity basics</a></p>

                    <div>
                        <h4 class="text-lg font-semibold">3: Pointing to GameObject script components and variables/properties</h4>
                        <p>To hopefully better show the way that variables and functions in C# code are addressed with the <strong>.</strong>dot operator, all the values of the variables of the script components are addressed using the dot operator.</p>
                        <p class="mt-2">Example: <code>Inspector view > Sun.Light.Color.Intensity = 4</code></p>
                        <p>The line above means selecting the Sun GameObject, finding its Light component, and setting the Intensity property to 4.</p>
                        <p class="mt-2">Example in C#:</p>
                        <pre class="bg-gray-800 text-gray-200 p-4 rounded-md overflow-x-auto"><code>public GameObject sun;
private Light light;

void Start()
{
    light = sun.GetComponent<Light>();
    sun.light.intensity = 4.0f;
}

void Update()
{
    sun.light.intensity = Mathf.PingPong(Time.time, 8);
}</code></pre>
                    </div>
                </div>
            </details>

            <!-- Steps -->
            <section class="space-y-4">
                <h2 class="text-2xl font-bold text-center pt-8 pb-4">Steps: Phase 1</h2>
                <p class="text-center italic">Phase one will be all about creating a VR Roller Coaster Shooter ‘template’ project first, meaning that we’ll create the basic structure and prototype game objects for the entire game so that in Phase two we can iterate on it, and develop things further.</p>

                <!-- Step Details Block -->
                <div class="space-y-3">
                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Install the Visual Studio Code script editor</summary>
                        <div class="p-4 border-t space-y-2">
                            <p><strong>Download & Install Visual Studio Code:</strong> <a href="https://code.visualstudio.com/" class="text-blue-600 hover:underline" target="_blank">https://code.visualstudio.com/</a></p>
                            <p><strong>Install the Unity for Visual Studio Code extension:</strong> In VS Code > Extensions > search ‘Unity’ > Install.</p>
                            <p><strong>Download & Install the .NET 7.0 Core SDK:</strong> <a href="https://dotnet.microsoft.com/en-us/download" class="text-blue-600 hover:underline" target="_blank">https://dotnet.microsoft.com/en-us/download</a></p>
                        </div>
                    </details>
                    
                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Download starter project with all dependencies</summary>
                        <div class="p-4 border-t space-y-2">
                            <p>Download the starter project from the link below and unzip it to a folder of your choice.</p>
                            <a href="https://github.com/ROCVA-DISSELDORP/VRRollerCoasterSampleProject6.0" class="text-blue-600 hover:underline" target="_blank">https://github.com/ROCVA-DISSELDORP/VRRollerCoasterSampleProject6.0</a>
                        </div>
                    </details>

                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Install the Unity Editor (with Android build support)</summary>
                        <div class="p-4 border-t space-y-2">
                            <p>Unity Hub > Installs > Install Editor > Official releases > 6000.0 LTS > Install</p>
                            <ul class="list-disc list-inside ml-4">
                                <li>select Android Build Support</li>
                                <li>select Windows Build Support (IL2CPP)</li>
                                <li>Install</li>
                            </ul>
                        </div>
                    </details>
                    
                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Add Downloaded Unity Project</summary>
                        <div class="p-4 border-t space-y-2">
                            <p>Unity Hub > Project > Add > Add from disk > select the unzipped project directory</p>
                        </div>
                    </details>

                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Set Visual Studio Code as the default external script editor</summary>
                        <div class="p-4 border-t space-y-2">
                            <p>Unity Menu Bar > Edit > Preferences > External Tools</p>
                            <ul class="list-disc list-inside ml-4">
                                <li>External Script Editor = Visual Studio Code</li>
                                <li>click Regenerate Project Files</li>
                            </ul>
                        </div>
                    </details>
                    
                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Switch Build Platform</summary>
                        <div class="p-4 border-t space-y-2">
                            <p>Unity Menu Bar > File > Build Settings</p>
                             <ul class="list-disc list-inside ml-4">
                                <li>Platform > select Android</li>
                                <li>click Switch Platform</li>
                            </ul>
                        </div>
                    </details>

                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Setup Level 1.unity Scene</summary>
                        <div class="p-4 border-t space-y-2">
                            <p><strong>Create new Level 1.unity scene file:</strong> In <em>Assets/MyGame/Scenes</em>, right click > Create > Scene and rename to '<em>Level 1.unity</em>'.</p>
                            <p><strong>Open Level 1.unity:</strong> Double click the file to open it.</p>
                        </div>
                    </details>

                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Setup Skybox</summary>
                        <div class="p-4 border-t space-y-2">
                            <p><strong>Apply skybox material:</strong> Unity Menu Bar > Window > Rendering > Lighting > Environment > Skybox Material = Epic_BlueSunset.mat</p>
                            <p><strong>Save Changes:</strong> Press Ctrl + S.</p>
                            <p><strong>    (Save your scene regularly to avoid losing your progress in case of a crash either by going to File > Save in the Unity menu bar or by pressing Control + S on your keyboard. You can see if there are any changes made to the scene that still need to be saved if there is a star * character displayed right after the name of your scene in the Hierarchy view.)</strong></p>
                        </div>
                    </details>
                    
                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Enable Fog</summary>
                        <div class="p-4 border-t space-y-2">
                            <p><strong>Enable camera fog:</strong> Unity Menu Bar > Window > Rendering > Lighting > Environment > Other Settings</p>
                            <ul class="list-disc list-inside ml-4">
                                <li>Fog = Enabled</li>
                                <li>Density = 0.02</li>
                            </ul>
                            <p><strong>Save Changes:</strong> Press Ctrl + S.</p>
                        </div>
                    </details>

                    <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Setup Sun</summary>
                        <div class="p-4 border-t space-y-2">
                             <p>In Hierarchy, rename ‘Directional Light’ to ‘Sun’ and select it.</p>
                             <p>In Inspector > Light component:</p>
                             <ul class="list-disc list-inside ml-4">
                                <li>Color = White (1, 1, 1, 1)</li>
                                <li>Intensity = ~4</li>
                             </ul>
                             <p><strong>Save Changes:</strong> Press Ctrl + S.</p>
                        </div>
                    </details>

                    <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Create WindZone</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">Create a WindZone GameObject</h4>
                    <p>Unity Menu Bar > GameObject > 3D Object > WindZone</p>
                    <p>Inspector view > WindZone.WindZone</p>
                    <ul class="list-disc list-inside ml-4">
                        <li>.Turbulence = ~0.2</li>
                        <li>.Pulse Magnitude = ~2</li>
                        <li>.Pulse Frequency = ~0.08</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">Enable Wind in Scene View</h4>
                    <p>Scene view Menu Bar > Toggle Skybox, Fog and Various Other Effects > Always Refresh = true</p>
                </div>
            </div>
        </details>

        <!-- Create Water -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Create Water</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">Create Water Plane GameObject</h4>
                    <p>Unity Menu Bar > GameObject > 3D > Plane. Rename to 'WaterPlane (0)'. Parent to 'Water'. Remove its Mesh Collider.</p>
                </div>
                <div>
                    <h4 class="font-semibold">Position and Scale WaterPlane</h4>
                    <p>Inspector view > WaterPlane.Transform</p>
                    <ul class="list-disc list-inside ml-4">
                        <li>.Position = (0, 1, 0)</li>
                        <li>.Scale = (50, 50, 50)</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">Choose a water material</h4>
                    <p>Use one of the water materials in the materials folder and put it on the plane</p>
                </div>
            </div>
        </details>

        <!-- Add VR Player -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Add VR Player</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">Add XR Interaction Setup Prefab to Scene</h4>
                    <p>From Project view > <em>Assets/Samples/XR Interaction Toolkit/3.07/Prefabs</em>, drag '<em>XR Interaction Setup.prefab</em>' to Hierarchy.</p>
                </div>
                <div>
                    <h4 class="font-semibold">Setup Player</h4>
                     <ul class="list-disc list-inside ml-4">
                        <li>Reset its position to (0, 0, 0).</li>
                        <li>Right-click on it > Prefab > Unpack Completely.</li>
                        <li>Rename ‘XR Origin (XR Rig)’ to ‘VRPlayer’.</li>
                        <li>Place the VRPlayer on your terrain surface (e.g., Y position matches terrain height).</li>
                        <li>Delete the default 'Main Camera' from the scene.</li>
                     </ul>
                </div>
            </div>
        </details>
        
        <!-- Create a New VRPlayer Script -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Create a New VRPlayer Script</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">Create Script</h4>
                    <p>In Project view > <em>Assets/MyGame/Scripts</em>, right-click > Create > C# Script > name it '<em>VRPlayer.cs</em>'.</p>
                </div>
                <div>
                    <h4 class="font-semibold">Add Code to VRPlayer.cs</h4>
                    <pre class="bg-gray-800 text-gray-200 p-4 rounded-md overflow-x-auto"><code>using UnityEngine;

public class PlayerController : MonoBehaviour
{
    [Header("Camera Settings")]
    public Transform cameraTransform;
    public float mouseSensitivity = 100f;

    [Header("Gun Settings")]
    public Transform gunHolder;
    public GameObject gun;

    public Transform gunCameraTransform;
    bool holdingGun = false;

    private CharacterController characterController;
    private float verticalRotation = 0f;

    void Start()
    {
        characterController = GetComponent&lt;CharacterController&gt;();
        Cursor.lockState = CursorLockMode.Locked;
    }

    void Update()
    {
        HandleCameraRotation();
        HandleGunInput();
    }

    void HandleCameraRotation()
    {
        float mouseX = Mouse.current.delta.ReadValue().x * mouseSensitivity * Time.deltaTime;
        float mouseY = Mouse.current.delta.ReadValue().y * mouseSensitivity * Time.deltaTime;

        transform.Rotate(Vector3.up * mouseX);
        verticalRotation -= mouseY;
        verticalRotation = Mathf.Clamp(verticalRotation, -90f, 90f);
        cameraTransform.localRotation = Quaternion.Euler(verticalRotation, 0f, 0f);
    }

    void HandleGunInput()
    {
        if (Keyboard.current.eKey.wasPressedThisFrame) // Grab or drop the gun
        {
            if (!holdingGun) { AttemptToGrabGun(); }
            else { DropGun(); }
        }

        if (holdingGun && Mouse.current.leftButton.wasPressedThisFrame) // Fire the gun
        {
            FireGun();
        }
    }

    void AttemptToGrabGun()
    {
        if ((gun.transform.position - transform.position).magnitude < 2)
        {
            holdingGun = true;
            gun.transform.SetParent(gunCameraTransform);
            gun.transform.SetLocalPositionAndRotation(Vector3.zero, Quaternion.identity);
        }
    }

    void DropGun()
    {
        if (holdingGun)
        {
            gun.GetComponent&lt;VRGun&gt;().OnRelease();
            gun.transform.SetParent(null);
            gun = null;
            holdingGun = false;
        }
    }

    void FireGun()
    {
        if (holdingGun)
        {
            gun.GetComponent&lt;VRGun&gt;().FireBullet();
        }
    }
}
</code></pre>
                </div>
                <div>
                    <h4 class="font-semibold">Add Script Component to VRPlayer GameObject</h4>
                    <p>In Inspector view for the VRPlayer, click Add Component > Scripts > VRPlayer.</p>
                </div>
            </div>
        </details>
        
        <!-- Create Roller Coaster Track Shaped Spline Template -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Create Roller Coaster Track Shaped Spline Template</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">Create New Spline GameObject</h4>
                    <p>Unity Menu Bar > GameObject > Spline > Square. Rename to 'RollerCoasterSpline'.</p>
                </div>
                <div>
                    <h4 class="font-semibold">Setup Spline</h4>
                    <p>Position the 'RollerCoasterSpline' at your terrain's height. In the Scene view, select the Spline Edit Mode tool.</p>
                    <img src="https://timcoster.com/wp-content/uploads/2023/09/screenshot-2023-09-15-at-18.24.30-983681182-e1694795130818.png" alt="Spline Edit Tool" class="my-2 h-8">
                    <p>In Inspector view > Spline component, set 'Closed' to false to start.</p>
                </div>
                <div>
                    <h4 class="font-semibold">Setup Spline Knots</h4>
                    <img src="./ARVR/splineKnots.png" alt="Spline Knots Diagram" class="my-2 w-full rounded-md shadow">
                    <p class="text-sm italic text-center">Note: Image path is local.</p>
                    <p>In the Inspector, adjust the position, rotation, and tangent for each knot. Start with Knot [0] at (0, 0, 0), and continue adding/adjusting knots to form your track shape.</p>
                    <div class="space-y-1 mt-2">
                        <details class="bg-white border rounded-md">
                            <summary class="p-2 cursor-pointer font-mono text-sm">.Knot [0]</summary>
                            <div class="p-2 border-t text-sm">Position = (0, 0, 0), Rotation = (0, 0, 0), Tangent Mode = Bezier, Tangent Length = 5</div>
                        </details>
                         <details class="bg-white border rounded-md">
                            <summary class="p-2 cursor-pointer font-mono text-sm">.Knot [1]</summary>
                            <div class="p-2 border-t text-sm">Position = (0, 0, 10), Rotation = (0, 0, 0), Tangent Mode = Bezier, Tangent Length = 5</div>
                        </details>
                        <details class="bg-white border rounded-md">
                            <summary class="p-2 cursor-pointer font-mono text-sm">.Knot [2]</summary>
                            <div class="p-2 border-t text-sm">Position = (0, 0, 30), Rotation = (0, 0, 0), Tangent Mode = Bezier, Tangent Length = 5</div>
                        </details>
                        <details class="bg-white border rounded-md">
                            <summary class="p-2 cursor-pointer font-mono text-sm">.Knot [3]</summary>
                            <div class="p-2 border-t text-sm">Position = (0, 0, 50), Rotation = (0, 0, 0), Tangent Mode = Bezier, Tangent Length = 5</div>
                        </details>
                        <p>Either contact the teacher for the spline or look on the <a href="https://rocva-disseldorp.github.io/ARVR">original tutorial</a> for the rest of the knots</p>
                    </div>
                    <p class="mt-2">When finished, set the spline's 'Closed' property back to true if you want a looping track.</p>
                </div>
            </div>
        </details>

                <!-- Generate Rollercoaster Track Mesh -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Generate Rollercoaster Track Mesh</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">1. Create Track Part Prefab</h4>
                    <p>First, build a reusable track segment from primitive shapes.</p>
                     <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Create an empty GameObject named '<em>TrackPart-Prefab</em>'. Inside it, create another empty named '<em>Mesh</em>'.</li>
                        <li>Create 1 Cube and 2 Cylinders and parent them to '<em>Mesh</em>'.</li>
                        <li>Apply the following transform values:</li>
                    </ul>
                    <pre class="mt-2"><code>
Cube:
  Position: (0, 0, 0)
  Scale:    (1, 0.1, 0.1)

Cylinder (0):
  Position: (-0.5, 0, 0)
  Rotation: (90, 0, 0)
  Scale:    (0.1, 0.5, 0.1)

Cylinder (1):
  Position: (0.5, 0, 0)
  Rotation: (90, 0, 0)
  Scale:    (0.1, 0.5, 0.1)
                    </code></pre>
                    <p class="mt-2">Finally, drag '<em>TrackPart-Prefab</em>' into your prefabs folder and delete it from the scene.</p>
                </div>
                <div>
                    <h4 class="font-semibold">2. Spawn Track Parts along Spline</h4>
                     <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Select your 'RollerCoasterSpline' GameObject.</li>
                        <li>Add the 'Spline Instantiate' component.</li>
                        <li>Assign your '<em>TrackPart-Prefab</em>' to the 'Items to Instantiate' list.</li>
                        <li>Set 'Spacing' to approximately <strong>0.85</strong>.</li>
                    </ul>
                </div>
            </div>
        </details>

        <!-- Create Primitive Roller Coaster Train 3D-Model -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Create Primitive Roller Coaster Train 3D-Model</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">1. Construct Train from Primitives</h4>
                    <p>Create an empty GameObject named '<em>RollerCoasterTrain</em>' with a child empty named '<em>Mesh</em>'. Create the following primitives and parent them to '<em>Mesh</em>'.</p>
                    <pre class="mt-2"><code>
// --- CUBES ---
Cube (0): Position: (0, 0.6, 0),    Scale: (1.8, 0.5, 2)
Cube (1): Position: (0, 1.25, 0.8),  Scale: (1.8, 0.8, 0.4)
Cube (2): Position: (0, 1.25, -0.9), Scale: (1.8, 0.8, 0.2)
Cube (3): Position: (-0.8, 1.25, -0.1), Scale: (0.2, 0.8, 1.4)
Cube (4): Position: (0.8, 1.25, -0.1),  Scale: (0.2, 0.8, 1.4)
Cube (5): Position: (0, 0.25, 0),    Scale: (0.5, 0.2, 1.6)
Cube (6): Position: (0, 1.275, -0.55), Scale: (1.4, 0.05, 0.5)

// --- CYLINDERS ---
Cylinder(0): Pos: (0, 0.18, 0.6),   Rot: (90, 90, 0), Scale: (0.1, 0.4, 0.1)
Cylinder(1): Pos: (0, 0.18, -0.6),  Rot: (90, 90, 0), Scale: (0.1, 0.4, 0.1)
Cylinder(2): Pos: (-0.5, 0.18, 0.6),  Rot: (90, 90, 0), Scale: (0.25, 0.1, 0.25)
Cylinder(3): Pos: (0.5, 0.18, 0.6),   Rot: (90, 90, 0), Scale: (0.25, 0.1, 0.25)
Cylinder(4): Pos: (-0.5, 0.18, -0.6), Rot: (90, 90, 0), Scale: (0.25, 0.1, 0.25)
Cylinder(5): Pos: (0.5, 0.18, -0.6),  Rot: (90, 90, 0), Scale: (0.25, 0.1, 0.25)
                    </code></pre>
                    <p class="mt-2">Remove the 'Capsule Collider' components from all Cylinders.</p>
                </div>
                 <div>
                    <h4 class="font-semibold">2. Add Audio and Materials</h4>
                     <ul class="list-disc list-inside ml-4 mt-2">
                         <li>Create a new material and apply it to all the primitive shapes.</li>
                        <li>Add an 'Audio Source' component to the root '<em>RollerCoasterTrain</em>' GameObject.</li>
                        <li>Assign a rolling sound effect. Set 'Loop' to true and disable 'Play On Awake'. Set 'Spatial Blend' to 1 (3D).</li>
                    </ul>
                </div>
            </div>
        </details>

        <!-- Setup Rollercoaster Train -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Setup Rollercoaster Train</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">1. Make the Train Follow the Spline</h4>
                     <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Select the 'RollerCoasterTrain' GameObject.</li>
                        <li>Add the 'Spline Animate' component.</li>
                        <li>Drag your 'RollerCoasterSpline' into the component's 'Spline' field.</li>
                        <li>Set Method to 'Speed', Speed to ~<strong>5</strong>, Loop Mode to 'Once'</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">2. Place the VR Player in the Train</h4>
                    <p>In the Hierarchy, parent the 'VRPlayer' GameObject to the 'RollerCoasterTrain'. Set the player's local position to <strong>(0, 0.8, 0)</strong> to position them correctly in the cart.</p>
                </div>
                  <div>
                    <h4 class="font-semibold">3. Test if your game works</h4>
                    <p>Right now you should have a character in a cart on a track, the player should be able to look around</p>
                </div>
            </div>
        </details>

                <!-- Setup VRPlayer -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Setup VRPlayer (Senstive step ask teacher for help)</summary>
            <div class="p-4 border-t space-y-6">
                <div class="aspect-w-16 aspect-h-9">
                    <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/pUYmdwVQ1hE" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
    
                <div>
                    <h4 class="font-semibold text-lg">1. Setup Tracking</h4>
                    <p class="mt-1">Select the 'VRPlayer' GameObject. In the Inspector, find the 'XR Origin' component and set 'Tracking Origin Mode' to <strong>Floor</strong>.</p>
                </div>

                <div>
                    <h4 class="font-semibold text-lg">2. Setup Walking</h4>
                     <ul class="list-disc list-inside ml-4 mt-1 space-y-1">
                        <li><strong>Enable Smooth Turning:</strong> In Hierarchy, go to VRPlayer > Camera Offset > Right Controller. In the Inspector, find the 'Action Based Controller Manager' and check 'Smooth Turn Enabled'.</li>
                        <li><strong>Adjust Smooth Turn Speed:</strong> In Hierarchy, go to VRPlayer > Locomotion System > Turn. In the Inspector, find the 'Continuous Turn Provider' and set 'Turn Speed' to <strong>90</strong>.</li>
                    </ul>
                </div>

                <div>
                    <h4 class="font-semibold text-lg">3. Setup Grabbing</h4>
                    <p class="mt-1">For both the <strong>Left Controller > Ray Interactor</strong> and <strong>Right Controller > Ray Interactor</strong> GameObjects, adjust the 'XR Ray Interactor' component:</p>
                     <ul class="list-disc list-inside ml-4 mt-1 space-y-1">
                        <li>Set 'Force Grab' to <strong>true</strong>.</li>
                        <li>Set 'Anchor Control' to <strong>false</strong>.</li>
                        <li>Drag the parent 'Left Controller' (or 'Right Controller') GameObject into the 'Attach Transform' field.</li>
                     </ul>
                </div>

                <div>
                    <h4 class="font-semibold text-lg">4. Disable Teleport Locomotion</h4>
                     <ul class="list-disc list-inside ml-4 mt-1 space-y-2">
                        <li><strong>Adjust Controller Managers:</strong> On both the Left and Right Controller GameObjects, find the 'Action Based Controller Manager' component and set its three Teleport fields ('Teleport Interactor', 'Teleport Mode Activate', 'Teleport Mode Cancel') to 'None'.</li>
                        <li><strong>Deactivate Teleport Interactors:</strong> In the Hierarchy, find the 'Teleport Interactor' child GameObject under each controller and disable it by unchecking the box next to its name in the Inspector.</li>
                        <li><strong>Deactivate Teleportation Provider:</strong> In Hierarchy, go to VRPlayer > Locomotion System and disable the 'Teleportation' GameObject.</li>
                    </ul>
                </div>
                
                <div>
                    <h4 class="font-semibold text-lg">5. Disable movement Tunneling Vignette</h4>
                    <p class="mt-1">In Hierarchy, go to VRPlayer > Main Camera and disable the 'TunnelingVignette' GameObject.</p>
                </div>
            </div>
        </details>

        <!-- Testing VR in Unity Editor Play Mode -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Testing VR in Unity Editor Play Mode (Not possible on all laptops)</summary>
            <div class="p-4 border-t space-y-4">
                <div class="aspect-w-16 aspect-h-9">
                    <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/YLg04LmOwf4" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div>
                    <h4 class="font-semibold">Setup Steps</h4>
                     <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                        <li>Check if you meet the <a href="https://www.meta.com/nl-nl/help/quest/140991407990979/" class="text-blue-600 hover:underline" target="_blank">Quest Link requirements</a>.</li>
                        <li>Download & Install the <a href="https://www.oculus.com/Setup/" class="text-blue-600 hover:underline" target="_blank">Oculus Rift Software</a>.</li>
                        <li>Setup Oculus Link with a cable (recommended) or wireless.</li>
                        <li><strong>Enable Unknown Sources:</strong> In the Oculus PC app > Settings > General, toggle 'Unknown Sources' to on.</li>
                        <li><strong>Enable Pass-Through:</strong> In the Oculus PC app > Settings > Beta, toggle 'Pass-through over Oculus Link' to on.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">Playtest Your Game</h4>
                     <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                        <li>Connect your Quest headset and enable Oculus Link.</li>
                        <li>In the Unity Editor, press the Play button.</li>
                        <li>Put on your headset to see the game running live.</li>
                    </ul>
                </div>
                <details class="bg-blue-50 border border-blue-200 rounded-lg">
                    <summary class="font-semibold cursor-pointer p-3">Notes</summary>
                    <div class="p-3 border-t">
                        <p>To test your game in VR in the Unity Editor during Play Mode you first have to turn on your Quest headset and connect it to your computer with the USB link cable. Then you have to launch the Oculus App on your computer and make sure your headset shows up as connected in the Oculus App > Devices window. Then when you put on the Quest headset you should see a pop up window asking if you want to enable Oculus Link and a pop up window asking if you want to enable USB debugging, press yes on both pop ups. When Oculus Link is enabled you will see the Oculus Dashboard instead of the regular Stand alone Quest dashboard environment. When you are in the Oculus dashboard on your Quest then you can press Play in Unity on your computer. Your scene will load and you can playtest it in VR!</p>
                    </div>
                </details>
            </div>
        </details>

            <!-- Create Primitive VR Gun Model -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Create Primitive VR Gun Model</summary>
            <div class="p-4 border-t space-y-4">
                <img src="https://timcoster.com/wp-content/uploads/2023/09/screenshot-2023-09-23-152915.png?w=1024" alt="Primitive VR Gun Model" class="mx-auto my-4 rounded-lg w-1/2">
                <div>
                    <h4 class="font-semibold">1. Construct Gun from Primitives</h4>
                    <p>Create an empty GameObject named '<em>VRGun</em>' with a child empty named '<em>Mesh</em>'. Create the following primitives and parent them to '<em>Mesh</em>'.</p>
                    <pre class="mt-2"><code>
// --- SPHERES ---
Sphere (0): Position: (0, 0, 0),       Scale: (0.05, 0.05, 0.05)
Sphere (1): Position: (0, 0, 0.5),     Scale: (0.05, 0.05, 0.05)
Sphere (2): Position: (0, -0.115, -0.16),  Scale: (0.05, 0.05, 0.05)
Sphere (3): Position: (0, -0.115, 0.336), Scale: (0.05, 0.05, 0.05)

// --- CYLINDERS ---
Cylinder (0): Pos: (0, 0, 0.25),     Rot: (90, 0, 0), Scale: (0.04, 0.25, 0.04)
Cylinder (1): Pos: (0, -0.114, 0.09),  Rot: (90, 0, 0), Scale: (0.04, 0.25, 0.04)
Cylinder (2): Pos: (0, -0.057, -0.082), Rot: (55, 0, 0), Scale: (0.04, 0.1, 0.04)
Cylinder (3): Pos: (0, -0.057, 0.418), Rot: (55, 0, 0), Scale: (0.04, 0.1, 0.04)
                    </code></pre>
                </div>
                <div>
                    <h4 class="font-semibold">2. Create and Apply Debug Material</h4>
                    <p>Create a bright red material and apply it to all the gun's primitive shapes.</p>
                </div>
                <div>
                    <h4 class="font-semibold">3. Create Bullet Spawn Point and Effects</h4>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Create an empty GameObject named '<em>BulletSpawnTransform</em>' and parent it to '<em>VRGun</em>'. Set its position to <strong>(0, 0, 0.55)</strong>.</li>
                        <li>Create a 'Particle System' and an 'Audio Source', parent both to '<em>VRGun</em>', and position them at <strong>(0, 0, 0.5)</strong>.</li>
                    </ul>
                </div>
            </div>
        </details>
        
        <!-- Setup VRGun Particle System & Audio Source -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Setup VRGun Particle System & Audio Source</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">Setup Particle System (Muzzle Flash)</h4>
                    <p>Select the Particle System on the gun and adjust its main settings:</p>
                    <pre class="mt-2"><code>
Duration:         0.05
Looping:          false
Play on Awake:    false
Start Lifetime:   0.8
Start Speed:      25
Start Size:       0.1
Start Color:      RGBA (1, 0.8, 0.3, 1)
Simulation Space: World

// Emission Module
Rate over Time:   0
Bursts:           [+] Add one burst of 1 particle

// Shape Module
Shape:            Cone
Angle:            10
Radius:           0.05

// Size over Lifetime Module (Enabled)
Curve:            Linear from 1 down to 0
                    </code></pre>
                </div>
                <div>
                    <h4 class="font-semibold">Setup Audio Source</h4>
                    <p>Assign a simple sound effect (e.g., '<em>Button Pop.wav</em>' from the XR Starter Assets) to the 'AudioClip' field of the Audio Source component.</p>
                </div>
            </div>
        </details>

        <!-- Attach VRGun to the front of the RollerCoasterTrain -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Attach VRGun to the front of the RollerCoasterTrain</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">1. Create VRGunHolder</h4>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Create an empty '<em>VRGunHolder</em>' and parent it to the '<em>RollerCoasterTrain</em>'. Set its local position to <strong>(0, 1.65, 0.8)</strong>.</li>
                        <li>Give the holder a simple visual mesh (e.g., a Cylinder) so you can see it.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">2. Create a Snap Point</h4>
                    <p>Create an empty '<em>VRGunSnapTransform</em>' and parent it to '<em>VRGunHolder</em>'. Set its local position to <strong>(0, 0.25, 0)</strong>. This is where the gun will return when dropped.</p>
                </div>
                <div>
                    <h4 class="font-semibold">3. Attach VRGun to Snap Point</h4>
                    <p>Drag the '<em>VRGun</em>' GameObject and parent it to the '<em>VRGunSnapTransform</em>'. Reset the gun's local position to (0, 0, 0).</p>
                </div>
            </div>
        </details>

        <!-- Make VRGun a Grabbable GameObject -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Make VRGun a Grabbable GameObject (VR sensitive step maybe contact teacher)</summary>
            <div class="p-4 border-t space-y-4">
                <div class="aspect-w-16 aspect-h-9">
                    <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/byHbcagMJRc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div>
                    <h4 class="font-semibold">1. Add XR Grab Interactable Component</h4>
                    <p>Select the '<em>VRGun</em>' GameObject and 'Add Component' > 'XR Grab Interactable'. This will also add a 'Rigidbody' component.</p>
                </div>
                <div>
                    <h4 class="font-semibold">2. Setup Rigidbody</h4>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Use Gravity: <strong>false</strong></li>
                        <li>Is Kinematic: <strong>true</strong></li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">3. Setup XR Grab Interactable</h4>
                     <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Throw On Detach: <strong>false</strong></li>
                        <li>Create an empty child of 'VRGun' named '<em>GrabAttachTransform</em>' at position <strong>(0, 0, 0.05)</strong> and assign it to the 'Attach Transform' field.</li>
                        <li>Offset the gun's '<em>Mesh</em>' object by <strong>(0, 0, -0.05)</strong> to center it on the controller.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold text-lg">4. Make Grabbable by Two Hands</h4>
                    <p>In the 'XR Grab Interactable' component, change 'Select Mode' to <strong>Multiple</strong>.</p>
                </div>
            </div>
        </details>

        <!-- Snap VRGun back to VRGunHolder when dropped by the player -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Snap VRGun back to VRGunHolder when dropped</summary>
            <div class="p-4 border-t space-y-4">
                <div class="aspect-w-16 aspect-h-9">
                    <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/Jt_lrMvB7Hg" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
                </div>
                <div>
                    <h4 class="font-semibold">1. Create VRGun.cs Script</h4>
                    <p>Create a new C# Script named '<em>VRGun.cs</em>', add it to the 'VRGun' GameObject, and paste the following code:</p>
                    <pre class="mt-2"><code>using UnityEngine;

public class VRGun: MonoBehaviour
{
    public Transform gunSnapTransform;

    // Called by the grab interactable when the gun is grabbed
    public void OnGrab()
    {
        Debug.Log("Gun is Grabbed!!!");
    }

    // Called by the grab interactable when the gun is released
    public void OnRelease()
    {
        Debug.Log("Gun is Dropped!!!");

        transform.position = gunSnapTransform.position;
        transform.rotation = gunSnapTransform.rotation;

        GetComponent<Rigidbody>().isKinematic = true;
    }
}</code></pre>
                </div>
                <div>
                    <h4 class="font-semibold">2. Setup VRGun Component</h4>
                    <p>In the Inspector for '<em>VRGun</em>', drag the '<em>VRGunSnapTransform</em>' GameObject into the 'Gun Snap Transform' field on your new script.</p>
                </div>
                <div>
                    <h4 class="font-semibold">3. Hook up Events</h4>
                    <p>On the 'XR Grab Interactable' component, find the 'Interactable Events' section:</p>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Under 'Last Select Exited', click '+' to add an event.</li>
                        <li>Drag the 'VRGun' GameObject into the object field.</li>
                        <li>From the function dropdown, select 'VRGun' > 'OnRelease()'.</li>
                    </ul>
                </div>
            </div>
        </details>

        <!-- Create Primitive Bullet 3D-Model -->
        <details class="bg-gray-50 border rounded-lg">
            <summary class="font-semibold text-lg cursor-pointer p-4">Create Primitive Bullet 3D-Model</summary>
            <div class="p-4 border-t space-y-4">
                <div>
                    <h4 class="font-semibold">1. Create Bullet GameObject</h4>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Create a 'Sphere' 3D Object and rename it '<em>Bullet-Prefab</em>'.</li>
                        <li>Set its scale to <strong>(0.05, 0.05, 0.05)</strong>.</li>
                        <li>Apply the same red debug material to it.</li>
                    </ul>
                </div>
                <div>
                    <h4 class="font-semibold">2. Add Effects Components</h4>
                    <ul class="list-disc list-inside ml-4 mt-2">
                        <li>Create a 'Particle System' and an 'Audio Source' and parent them to '<em>Bullet-Prefab</em>'.</li>
                        <li>Reset their local positions and scales.</li>
                    </ul>
                </div>
                <p class="mt-2">Once configured, drag the '<em>Bullet-Prefab</em>' into your prefabs folder and delete it from the scene.</p>
            </div>
        </details>

        <!-- Setup Bullet Prefab -->
<details class="bg-gray-50 border rounded-lg">
    <summary class="font-semibold text-lg cursor-pointer p-4">Setup Bullet Prefab</summary>
    <div class="p-4 border-t space-y-4">

        <div class="aspect-w-16 aspect-h-9">
            <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/NY4Kzy5xZkY" title="Unity Bullet Setup Tutorial" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>

        <div>
            <h4 class="font-semibold">1. Create Bullet-Prefab</h4>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li>Create a <em>Sphere</em> 3D object and rename it <strong>Bullet-Prefab</strong>.</li>
                <li>Scale: <strong>(0.05, 0.05, 0.05)</strong>.</li>
                <li>Apply the red debug material.</li>
            </ul>
        </div>

        <div>
            <h4 class="font-semibold">2. Add Components</h4>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li><strong>Rigidbody</strong> → Use Gravity: <em>false</em>, Collision Detection: <em>Continuous Dynamic</em>.</li>
                <li><strong>SphereCollider</strong> (default on Sphere).</li>
                <li><strong>Particle System</strong> → Shrink size over lifetime, small sphere emission.</li>
                <li><strong>Audio Source</strong> → Assign <em>Button Pop.wav</em> (XR Starter Assets).</li>
            </ul>
        </div>

        <div>
            <h4 class="font-semibold">3. Create Bullet Script</h4>
            <p>Create <code>Bullet.cs</code> in <em>/Assets/MyGame/Scripts</em> and attach it to <em>Bullet-Prefab</em>:</p>
            <pre class="mt-2"><code>using UnityEngine;

public class Bullet : MonoBehaviour
{
    public ParticleSystem explosionParticleSystem;
    public AudioSource explosionAudioSource;

    void OnCollisionEnter(Collision collider)
    {
        Debug.Log("Bullet HIT!!!");
        explosionParticleSystem.Play();
        explosionAudioSource.Play();

        GetComponent&lt;SphereCollider&gt;().enabled = false;
        GetComponent&lt;MeshRenderer&gt;().enabled = false;
    }
}</code></pre>
        </div>

        <div>
            <h4 class="font-semibold">4. Link References</h4>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li>Drag <strong>Particle System</strong> into <em>Explosion Particles</em>.</li>
                <li>Drag <strong>Audio Source</strong> into <em>Explosion Audio</em>.</li>
            </ul>
        </div>

        <div>
            <h4 class="font-semibold">5. Save as Prefab</h4>
            <p>Drag <em>Bullet-Prefab</em> into <em>Assets/MyGame/Prefabs</em> and remove it from the scene.</p>
        </div>
    </div>
</details>

 <details class="bg-gray-50 border rounded-lg">
                        <summary class="font-semibold text-lg cursor-pointer p-4">Fire VRGun</summary>
                        <div class="p-4 border-t space-y-2">
                            <p><strong>Add new public variables to VRGun class:</strong></p>
                            <pre class="bg-gray-800 text-gray-200 p-4 rounded-md overflow-x-auto"><code>public Transform bulletSpawnTransform;
public GameObject bulletPrefab;
public ParticleSystem gunFireParticleSystem;
public AudioSource gunFireAudioSource;

public float fireSpeed = 125.0f;</code></pre>

                            <p><strong>Add new public FireBullet() function to VRGun class:</strong></p>
                             <pre class="bg-gray-800 text-gray-200 p-4 rounded-md overflow-x-auto"><code>public void FireBullet()
{
    Debug.Log("Gun is Fired!!!");
    
    // Play effects
    gunFireParticleSystem.Play();
    gunFireAudioSource.Play();

    // Spawn bullet
    GameObject spawnedBullet = Instantiate(bulletPrefab);
    spawnedBullet.transform.position = bulletSpawnTransform.position;
    spawnedBullet.transform.rotation = bulletSpawnTransform.rotation;

    // Fire it
    spawnedBullet.GetComponent<Rigidbody>().velocity = spawnedBullet.transform.forward * fireSpeed;
    
    // Destroy it after 5 seconds
    Destroy(spawnedBullet, 5);
}</code></pre>
                            
                            <p><strong>Setup Gun Firing in Inspector:</strong></p>
                             <ul class="list-disc list-inside ml-4">
                                <li>Assign all the new public variables (BulletSpawnTransform, Bullet-Prefab, etc.) by dragging GameObjects from the Hierarchy/Project view.</li>
                                <li>In VRGun > XR Grab Interactable > Interactable Events > Activated, click '+' and hook up the VRGun.FireBullet() function.</li>
                             </ul>
                        </div>
                    </details>

<!-- Fire VRGun & Automatically Destroy Bullets -->
<details class="bg-gray-50 border rounded-lg">
    <summary class="font-semibold text-lg cursor-pointer p-4">Fire VRGun & Automatically Destroy Bullets</summary>
    <div class="p-4 border-t space-y-4">
        <div class="aspect-w-16 aspect-h-9">
            <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/zPccr1q-q5Q" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div>
            <h4 class="font-semibold">1. Create/Update VRGun.cs Script</h4>
            <p>Add the following code to your <em>VRGun.cs</em> script. This single block includes public variables for the editor, the firing logic, and automatically destroys the bullet after 5 seconds.</p>
            <pre class="mt-2"><code>
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class VRGun : MonoBehaviour
{
    // Assign these in the Unity Inspector
    public Transform gunSnapTransform;
    public Transform bulletSpawnTransform;
    public GameObject bulletPrefab;
    public ParticleSystem gunFireParticleSystem;
    public AudioSource gunFireAudioSource;
    
    public float fireSpeed = 125.0f;

    // Called when the gun is grabbed
    public void OnGrab()
    {
        Debug.Log("Gun is Grabbed!!!");
    }

    // Called when the gun is released
    public void OnRelease()
    {
        Debug.Log("Gun is Dropped!!!");
        transform.position = gunSnapTransform.position;
        transform.rotation = gunSnapTransform.rotation;
        GetComponent&lt;Rigidbody&gt;().isKinematic = true;
    }

    // Called by the XR Grab Interactable 'Activated' event
    public void FireBullet()
    {
        Debug.Log("Gun is Fired!!!");
        
        // Play effects
        gunFireParticleSystem.Play();
        gunFireAudioSource.Play();

        // Create a new bullet from the prefab
        GameObject spawnedBullet = Instantiate(bulletPrefab);

        // Position the bullet at the tip of the gun barrel
        spawnedBullet.transform.position = bulletSpawnTransform.position;
        spawnedBullet.transform.rotation = bulletSpawnTransform.rotation;

        // Fire the bullet forward
        spawnedBullet.GetComponent&lt;Rigidbody&gt;().velocity = spawnedBullet.transform.forward * fireSpeed;
        
        // Destroy the bullet after 5 seconds to clean up the scene
        Destroy(spawnedBullet, 5);
    }
}
</code></pre>
        </div>
        <div>
            <h4 class="font-semibold">2. Setup VRGun Component in Inspector</h4>
            <p>Select your '<em>VRGun</em>' GameObject and drag the corresponding objects from the Hierarchy or Project view into the script's public fields:</p>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li><strong>Bullet Spawn Transform:</strong> The empty GameObject at the tip of the barrel.</li>
                <li><strong>Bullet Prefab:</strong> Your '<em>Bullet-Prefab</em>' from the Assets folder.</li>
                <li><strong>Gun Fire Particle System:</strong> The Particle System on the gun.</li>
                <li><strong>Gun Fire Audio Source:</strong> The Audio Source on the gun.</li>
            </ul>
        </div>
        <div>
            <h4 class="font-semibold">3. Hook up the Fire Event</h4>
            <p>On the '<em>VRGun</em>' GameObject, find the 'XR Grab Interactable' component and expand the 'Interactable Events' section:</p>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li>Under '<strong>Activated (+)</strong>', click the '<strong>+</strong>' button.</li>
                <li>Drag the '<em>VRGun</em>' GameObject itself into the 'None (Object)' field.</li>
                <li>From the 'No Function' dropdown, select '<strong>VRGun</strong>' > '<strong>FireBullet ()</strong>'.</li>
            </ul>
        </div>
    </div>
</details>

<!-- Make VRGun Grabbable by Two Hands -->
<details class="bg-gray-50 border rounded-lg">
    <summary class="font-semibold text-lg cursor-pointer p-4">Make VRGun Grabbable by Two Hands</summary>
    <div class="p-4 border-t space-y-4">
        <div class="aspect-w-16 aspect-h-9">
            <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/9V1S5C4fKSU" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div>
            <h4 class="font-semibold">Enable Two-Handed Grabbing</h4>
            <p>To allow the player to hold the gun with both hands for better aiming, make a simple change in the Inspector.</p>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li>Select the '<em>VRGun</em>' GameObject in the Hierarchy.</li>
                <li>In the 'XR Grab Interactable' component, change the '<strong>Select Mode</strong>' from 'Single' to '<strong>Multiple</strong>'.</li>
            </ul>
        </div>
        <details class="bg-blue-50 border border-blue-200 rounded-lg">
            <summary class="font-semibold cursor-pointer p-3">Notes</summary>
            <div class="p-3 border-t">
                <p>This setting allows a second controller to grab the interactable without releasing it from the first. This creates a stable, two-handed grip effect, which is ideal for rifles and larger weapons.</p>
            </div>
        </details>
    </div>
</details>

<!-- Testing VR in Unity Editor Play Mode -->
<details class="bg-gray-50 border rounded-lg">
    <summary class="font-semibold text-lg cursor-pointer p-4">Testing VR in Unity Editor Play Mode</summary>
    <div class="p-4 border-t space-y-4">
        <div class="aspect-w-16 aspect-h-9">
            <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/e_48-xaTVH0" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div>
            <h4 class="font-semibold">Setup Steps</h4>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li>Download & Install the <a href="https://www.oculus.com/Setup/" class="text-blue-600 hover:underline" target="_blank">Oculus PC App</a>.</li>
                <li>Connect your headset to your PC with Oculus Link (a USB-C cable is recommended).</li>
                <li>In the Oculus PC app, go to <strong>Settings > General</strong> and enable '<strong>Unknown Sources</strong>'. This allows Unity to connect to your headset.</li>
            </ul>
        </div>
        <div>
            <h4 class="font-semibold">Playtest Your Game</h4>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li>With your headset connected and Oculus Link active, press the <strong>Play</strong> button in the Unity Editor.</li>
                <li>Put on your headset to test the grabbing and firing mechanics live in your game scene.</li>
            </ul>
        </div>
    </div>
</details>

<!-- Advanced VR Gun Firing Logic -->
<details class="bg-gray-50 border rounded-lg">
    <summary class="font-semibold text-lg cursor-pointer p-4">Advanced VR Gun Firing (Physics Accuracy)</summary>
    <div class="p-4 border-t space-y-4">
        <div class="aspect-w-16 aspect-h-9">
            <iframe class="w-full h-full rounded-md" src="https://www.youtube.com/embed/PwZEQ7rJ0zc" title="YouTube video player" frameborder="0" allow="accelerometer; autoplay; clipboard-write; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
        </div>
        <div>
            <h4 class="font-semibold">1. Final VRGun.cs Script</h4>
            <p>Replace the code in your <em>VRGun.cs</em> script with this complete version. It includes logic to handle firing while moving, preventing self-collision, and cleaning up bullets automatically.</p>
            <pre class="mt-2"><code>
using System.Collections;
using System.Collections.Generic;
using UnityEngine;

public class VRGun : MonoBehaviour
{
    // --- Assign in Inspector ---
    public Transform gunSnapTransform;
    public Transform bulletSpawnTransform;
    public GameObject bulletPrefab;
    public ParticleSystem gunFireParticleSystem;
    public AudioSource gunFireAudioSource;
    public Collider[] gunColliders; // Assign all gun mesh colliders here
    
    public float fireSpeed = 125.0f;

    // --- Private Variables ---
    private Vector3 gunVelocity;
    private Vector3 previousPosition;
    private bool fireFlag = false;

    void Start()
    {
        // Set initial position for velocity calculation
        previousPosition = bulletSpawnTransform.position;
    }

    void Update()
    { 
        // Calculate the gun's velocity based on its movement each frame
        gunVelocity = (bulletSpawnTransform.position - previousPosition) / Time.deltaTime;
        previousPosition = bulletSpawnTransform.position;
    }

    // Physics calculations are done in FixedUpdate for consistency
    void FixedUpdate()
    {
        // If the trigger was pulled (fireFlag set to true), call the Fire() method
        if(fireFlag == true)
        {
            fireFlag = false; // Reset the flag
            Fire();
        }
    }

    // Called by the XR Grab Interactable's 'Activated' event.
    // This just raises the flag for FixedUpdate to handle the firing.
    public void FireBullet()
    {
        fireFlag = true;
    }

    // This method contains the actual firing logic
    private void Fire()
    {
        Debug.Log("Gun is Fired!!!");
        
        // Play firing effects
        gunFireParticleSystem.Play();
        gunFireAudioSource.Play();

        // Create a bullet
        GameObject spawnedBullet = Instantiate(bulletPrefab);
        spawnedBullet.transform.position = bulletSpawnTransform.position;
        spawnedBullet.transform.rotation = bulletSpawnTransform.rotation;

        // Get the bullet's Rigidbody and its collider
        Rigidbody bulletRigidbody = spawnedBullet.GetComponent&lt;Rigidbody&gt;();
        SphereCollider spawnedBulletCollider = spawnedBullet.GetComponent&lt;SphereCollider&gt;();
        
        // Make the bullet ignore collisions with all parts of the gun
        for(int i = 0; i < gunColliders.Length; i++)
        {
            Physics.IgnoreCollision(spawnedBulletCollider, gunColliders[i], true);
        }

        // Set the bullet's velocity, adding the gun's current velocity
        // This makes shooting from a moving object (like a roller coaster) accurate
        bulletRigidbody.velocity = gunVelocity + (spawnedBullet.transform.forward * fireSpeed);
        
        // Destroy the bullet after 5 seconds to keep the scene clean
        Destroy(spawnedBullet, 5);
    }

    // Called when the gun is grabbed
    public void OnGrab()
    {
        Debug.Log("Gun is Grabbed!!!");
    }

    // Called when the gun is released
    public void OnRelease()
    {
        Debug.Log("Gun is Dropped!!!");
        transform.position = gunSnapTransform.position;
        transform.rotation = gunSnapTransform.rotation;
        GetComponent&lt;Rigidbody&gt;().isKinematic = true;
    }
}
</code></pre>
        </div>
        <div>
            <h4 class="font-semibold">2. Setup in Unity Inspector</h4>
            <p>Select your '<em>VRGun</em>' GameObject and update its script component in the Inspector:</p>
            <ul class="list-disc list-inside ml-4 mt-2 space-y-1">
                <li>Find the '<strong>Gun Colliders</strong>' array on the 'VRGun' script. Set its 'Size' to match the number of primitive shapes in your gun's '<em>Mesh</em>' (e.g., 8 if you have 4 spheres and 4 cylinders).</li>
                <li>Drag each individual Sphere and Cylinder collider from the gun's '<em>Mesh</em>' object into the empty slots of the 'Gun Colliders' array.</li>
                <li>Ensure the 'Activated' event on the 'XR Grab Interactable' component is still calling the <strong>FireBullet()</strong> function.</li>
            </ul>
        </div>
        <details class="bg-blue-50 border border-blue-200 rounded-lg">
            <summary class="font-semibold cursor-pointer p-3">Notes</summary>
            <div class="p-3 border-t">
                <p>These changes make the physics-based gun much more reliable and realistic. By firing in <strong>FixedUpdate</strong>, we sync with Unity's physics engine. Adding the gun's own velocity to the bullet ensures that shots are accurate even when you are moving quickly. Finally, ignoring collisions between the bullet and the gun prevents the bullet from hitting the barrel and flying off in a random direction.</p>
            </div>
        </details>
    </div>
</details>

                </div>
            </section>
            
            <footer class="text-center pt-8 border-t">
                 <a href="./ARVR2Part2.html" class="inline-block bg-blue-600 text-white font-bold py-3 px-6 rounded-lg hover:bg-blue-700 transition-colors">
                    Go to Part 2 >
                </a>
            </footer>

        </main>
    </div>
</body>
</html>